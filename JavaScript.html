<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Document</title>

		<!-- Boostrap CSS -->
		<link
			rel="stylesheet"
			href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
			integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="css/style.css" />
	</head>
	<body>
		<nav id="nav"></nav>
		<article class="container">
			<h3>JavaScript</h3>
			<div>
				<h4>What Is JavaScript in the Web?</h4>
				<p>
					JavaScript is the programming language that drives the interactivity of content in the web. It makes it intuitive and enhances the
					user experience (UX) (Note: CSS focuses on user interface (UI)).
				</p>
			</div>
			<div>
				<h4>Asynchonous JavaScript and XML (AJAX)</h4>
				<p>
					AJAX is the dream of any web developer, to be able to fetch data without the need of refreshing the page. AJAX is a method most often used with API sources serving data usually in the form of Javascript Object Notation (JSON) in order to fetch data. This data could be anything, a response error, a payload or even HTML and CSS (most common for Single-page Applications). Unlike a usual web HTTP request, AJAX is not only limited to GET request, it can also perform POST request that can contain an request body that can be used for sending data to the server. There multiple "fake" HTML request that are supported in the browser, such as PUT and DELETE, but only GET and POST are supported by HTML. See W3C HTML 5.0 spec.
				</p>

				<h5>AJAX Demo</h5>
				<div id="ajax-demo"></div>
			</div>
			<p>
				Cupidatat qui velit esse consectetur elit quis tempor eu irure non Lorem. Culpa velit amet duis do proident Lorem ullamco
				exercitation aute magna minim. Sint Lorem est sunt laboris consectetur est nisi Lorem ullamco id nisi est. Et tempor deserunt
				exercitation anim laboris labore irure incididunt elit amet nostrud Lorem excepteur. Eu duis labore proident laboris id consectetur.
			</p>
		</article>
		<footer id="footer"></footer>

		<!-- Jquery -->
		<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

		<!-- BOOSTRAP JS -->
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
			integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
			crossorigin="anonymous"
		></script>

		<script
			src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
			integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
			crossorigin="anonymous"
		></script>

		<!-- My Bundled Component Script -->
		<script src="dist/bundle.js"></script>
		<script>
			(async () => {
				const data = await (await fetch('http://localhost:3000/api/token')).json();
				const trackId = '0MQpgi6zSeof8DKvc9ymZO';

				const requestParams = {
					method: 'GET',
					headers: { Authorization: 'Bearer ' + data.accessToken }
				};
				const spotifyData = await (await fetch(`https://api.spotify.com/v1/albums/${trackId}/tracks`, requestParams)).json();
				const spotifyDataRFU = await spotifyData.items.map(async ({ name, id, artists, preview_url }) => {
					const songIndividualData = await (await fetch(`https://api.spotify.com/v1/tracks/${id}`, requestParams)).json();
					const pictureUrl = songIndividualData.album.images[0].url;
					console.log('FETCH INDIVIDUAL', pictureUrl);
					return {
						id,
						name,
						artist: artists[0].name,
						preview_url,
						pictureUrl
					};
				});
				Promise.all(spotifyDataRFU).then(results => console.log(results));
			})();
		</script>
	</body>
</html>
